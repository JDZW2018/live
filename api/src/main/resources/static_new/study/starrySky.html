<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <base target="_self" href="http://192.168.1.108:90/ws_project/jiaotouxueyuan/">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,initial-scale=1.0, user-scalable=no" />
    <link href="css/reset.css" rel="stylesheet" type="text/css"/>
    <link href="css/videoCourseList.css" rel="stylesheet" type="text/css"/>
    <script src="js/conform.js" type="text/javascript"></script>
    <script src="js/iScroll-5.1.2.js"></script>
    <title>视频</title>
    <style>

    </style>
</head>
<body>
<nav class="nav">
    <div id="wrapper">
        <div id="scroller">
            <ul class="category_nav">
                <li><a>免1</a></li>
                <li><a>创业2</a></li>
                <li><a>管理学3</a></li>
                <li><a>父母学院</a></li>
                <li><a>免5</a></li>
                <li><a>免费6</a></li>
                <li><a>免费学7</a></li>
                <li><a>免费学院8</a></li>
                <li><a>免9</a></li>
                <li><a>免费0</a></li>
                <li><a>免费学1</a></li>
                <li><a>免费学院2</a></li>
                <li><a>免3</a></li>
                <li><a>免费4</a></li>
                <li><a>免费学5</a></li>
            </ul>
        </div>
    </div>
</nav>
<nav class="nav1">
    <div id="wrapper1">
        <div id="scroller1">
            <ul class="category_nav1">
                <li>
                    <div class="search">
                        <div class="searchBox">
                            <input type="text"/>
                            <span>搜索</span>
                        </div>
                    </div>
                    <img src="image/kechenging2.png" style="width:100%;height: 3.4rem;">
                    <div class="lines">
                        <a><!-- href="eliteCoach.html"-->
                            <div class="line">
                                <img class="img1" src="image/kechenging3.png">
                                <div class="img1R">
                                    <div class="tit">企业订购计划1</div>
                                    <div class="user">教头：李文秀</div>
                                    <div class="null"></div>
                                    <div class="price">￥100.00</div>
                                    <div class="data">2017-02-05</div>
                                </div>
                            </div>
                        </a>
                        <a>
                            <div class="line">
                                <img class="img1" src="image/kechenging3.png">
                                <div class="img1R">
                                    <div class="tit">企业订购计划1</div>
                                    <div class="user">教头：李文秀</div>
                                    <div class="null"></div>
                                    <div class="price">￥100.00</div>
                                    <div class="data">2017-02-05</div>
                                </div>
                            </div>
                        </a>
                    </div>
                </li><li>
                <div class="search">
                    <div class="searchBox">
                        <input type="text"/>
                        <span>搜索</span>
                    </div>
                </div>
                <img src="image/kechenging2.png" style="width:100%;height: 3.4rem;">
                <div class="lines">
                    <a>
                        <div class="line">
                            <img class="img1" src="image/kechenging3.png">
                            <div class="img1R">
                                <div class="tit">企业订购计划2</div>
                                <div class="user">教头：李文秀</div>
                                <div class="null"></div>
                                <div class="price">￥100.00</div>
                                <div class="data">2017-02-05</div>
                            </div>
                        </div>
                    </a>
                    <a>
                        <div class="line">
                            <img class="img1" src="image/kechenging3.png">
                            <div class="img1R">
                                <div class="tit">企业订购计划2</div>
                                <div class="user">教头：李文秀</div>
                                <div class="null"></div>
                                <div class="price">￥100.00</div>
                                <div class="data">2017-02-05</div>
                            </div>
                        </div>
                    </a>
                </div>
            </li><li>
                <div class="search">
                    <div class="searchBox">
                        <input type="text"/>
                        <span>搜索</span>
                    </div>
                </div>
                <img src="image/kechenging2.png" style="width:100%;height: 3.4rem;">
                <div class="lines">
                    <a>
                        <div class="line">
                            <img class="img1" src="image/kechenging3.png">
                            <div class="img1R">
                                <div class="tit">企业订购计划3</div>
                                <div class="user">教头：李文秀</div>
                                <div class="null"></div>
                                <div class="price">￥100.00</div>
                                <div class="data">2017-02-05</div>
                            </div>
                        </div>
                    </a>
                    <a >
                        <div class="line">
                            <img class="img1" src="image/kechenging3.png">
                            <div class="img1R">
                                <div class="tit">企业订购计划3</div>
                                <div class="user">教头：李文秀</div>
                                <div class="null"></div>
                                <div class="price">￥100.00</div>
                                <div class="data">2017-02-05</div>
                            </div>
                        </div>
                    </a>
                </div>
            </li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li>
            </ul>
        </div>
    </div>
</nav>
</body>
<script src="js/jquery.min.js" type="text/javascript" ></script>
<script >
    $(function () {
        function splitRGB(rgb) {return rgb.substr(4,rgb.length-5).split(', ')}
        var r1 = "rgb(0, 0, 0)";
        var r2 = "rgb(255, 164, 47)";
        var arrPreRGB = splitRGB(r1);
        var arrCurRGB = splitRGB(r2);
        var r1_1 = "rgb(255, 255, 255)";
        var r2_1 = "rgb(255, 164, 47)";
        var arrPreRGB_1 = splitRGB(r1_1);
        var arrCurRGB_1 = splitRGB(r2_1);
        function setRGB(n255,direction) {
            var add0 = ((Math.abs(arrCurRGB[0]-arrPreRGB[0]))/255)*n255;
            var add1 = ((Math.abs(arrCurRGB[1]-arrPreRGB[1]))/255)*n255;
            var add2 = ((Math.abs(arrCurRGB[2]-arrPreRGB[2]))/255)*n255;
            var add0_1 = parseInt(((Math.abs(arrCurRGB_1[0]-arrPreRGB_1[0]))/255)*n255);
            var add1_1 = parseInt(((Math.abs(arrCurRGB_1[1]-arrPreRGB_1[1]))/255)*n255);
            var add2_1 = parseInt(((Math.abs(arrCurRGB_1[2]-arrPreRGB_1[2]))/255)*n255);
            if (direction>0){return ["rgb("+parseInt(arrPreRGB[0]+add0)+", "+parseInt(arrPreRGB[1]+add1)+", "+parseInt(arrPreRGB[2]+add2)+")", "rgb("+parseInt(parseInt(arrPreRGB_1[0])-add0_1)+", "+parseInt(parseInt(arrPreRGB_1[1])-add1_1)+", "+parseInt(parseInt(arrPreRGB_1[2])-add2_1)+")"];}
            if (direction<0){return ["rgb("+parseInt(arrCurRGB[0]-add0)+", "+parseInt(arrCurRGB[1]-add1)+", "+parseInt(arrCurRGB[2]-add2)+")","rgb("+parseInt(parseInt(arrCurRGB_1[0])+add0_1)+", "+parseInt(parseInt(arrCurRGB_1[1])+add1_1)+", "+parseInt(parseInt(arrCurRGB_1[2])+add2_1)+")"];}
        }


        var category_nav = $(".category_nav");
        var category_nav1 = $(".category_nav1");
        var category_navLiWidth = category_nav.children("li").eq(0).width();
        var all_width = category_nav["0"].scrollWidth;
        var all_width1 = $("body").width();
        var scroller = $('#scroller');
        var scroller1_li = $('#scroller1 .category_nav1>li');
        scroller.css({'width':all_width + 'px'})
        scroller1_li.css({'width':all_width1 + 'px'})
        var ulN = category_nav["0"].scrollWidth/category_nav1["0"].scrollWidth;
        var myscroll=new IScroll("#wrapper",{
//            mouseWheel: true,
            disablePointer: true,
//            disableTouch:false,
//            disableMouse:false,
            scrollX: true,
            scrollY: false,
            hScrollbar:false,
            vScrollbar : false,
            vScroll:true,
            click : true,
            deceleration:0.001,
        })
        var myscroll1=new IScroll("#wrapper1",{
            probeType:3,
//            bounce:false,
            disablePointer: true,
            disableTouch:false,
//            bounce:false,             //弹动效果
//            deceleration:0,
            scrollX: true,
            scrollY: false,
            hScrollbar:false,
            vScrollbar : false,
            vScroll:false,
            click : true,
            snapThreshold:0.4,
            snap : 'li',
            momentum:false,           //惯性
        })
        function initActive(x1) {
            category_nav.children("li").removeClass("active").children("a").css({"color":x1})
            category_nav.children("li").css({"border-bottom":"0.01rem solid #fff"})
        }
        function changeColor(index,color) {
            category_nav.children("li").eq(index).children("a").css({"color":color[0]});
            category_nav.children("li").eq(index).css({"border-bottom":"0.01rem solid "+color[1]});
        }
        function addActive(index) {
            category_nav.children("li").eq(index).addClass("active");
        }
        function myscrollToElement(index,l,t,direction) {
            myscroll.scrollToElement(document.querySelector('#scroller li:nth-child('+(index+1)+')'),t,-myscrollOffset+direction*l,true);
        }
        var myscrollOffset;
        category_nav.on("click","li",function () {
            initActive("#000")
            changeColor($(this).index(),[r2,r2_1]);
            myscroll1.goToPage($(this).index(),0,100);
            myscroll.scrollToElement(document.querySelector('#scroller li:nth-child('+($(this).index()+1)+')'),500,true,true);
        })
        myscroll1.on("flick",function (e) {
            initActive("#000");
            changeColor(this.currentPage.pageX,[r2,r2_1]);
            changeColor(this.currentPage.pageX+this.directionX,[r1,r1_1]);
            myscrollToElement(this.currentPage.pageX,0,500,this.directionX);
        })
        var directionIng,pageXIng;
        myscroll1.on("scrollMove",function () {
            var x = (Math.abs(Math.abs(this.x)-myscroll1X)/all_width1)*category_navLiWidth;
            var y = (Math.abs(Math.abs(this.x)-myscroll1X)/all_width1)*255;
            myscrollToElement(pageXIng,x,0,directionIng);
            changeColor(pageXIng,setRGB(y,-1));
            changeColor(pageXIng+directionIng,setRGB(y,1));
        })
        $(".nav1")["0"].addEventListener("touchend",function (e) {
            initActive("#000");
            if(Math.abs(myscroll1.distX)>myscroll1.snapThresholdX){
                if(directionIng===-1&&pageXIng===0){changeColor(pageXIng,[r2,r2_1]);return ;}
                if(directionIng===1&&pageXIng===(category_nav.children("li").length-1)){changeColor(pageXIng,[r2,r2_1]);return ;}
                changeColor(myscroll1.currentPage.pageX,[r1,r1_1]);
                changeColor(myscroll1.currentPage.pageX+directionIng,[r2,r2_1]);
                myscrollToElement(myscroll1.currentPage.pageX+myscroll1.directionX,0,500,myscroll1.directionX);
            }else{
                if(directionIng===-1&&pageXIng===0){changeColor(pageXIng,[r2,r2_1]);return ;}
                if(directionIng===1&&pageXIng===(category_nav.children("li").length-1)){changeColor(pageXIng,[r2,r2_1]);return ;}
                changeColor(myscroll1.currentPage.pageX,[r2,r2_1]);
                changeColor(myscroll1.currentPage.pageX+myscroll1.directionX,[r1,r1_1]);
                myscrollToElement(myscroll1.currentPage.pageX,0,500,0);
            }
        })
        myscroll1.on("scrollStart",function () {
//            initActive("#000");
            directionIng = this.directionX;
            pageXIng = this.currentPage.pageX;
            myscroll1X = Math.abs(this.x);
            myscrollOffset = (all_width1-category_navLiWidth)/2;
        })
    })
</script>
</html>